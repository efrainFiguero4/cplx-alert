!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("util"),require("rxjs"),require("rxjs/operators"),require("@angular/forms"),require("@angular/common")):"function"==typeof define&&define.amd?define("cplx-autocomplete",["exports","@angular/core","util","rxjs","rxjs/operators","@angular/forms","@angular/common"],e):e((t=t||self)["cplx-autocomplete"]={},t.ng.core,t.util,t.rxjs,t.rxjs.operators,t.ng.forms,t.ng.common)}(this,(function(t,e,o,r,n,i,a){"use strict";var l=this&&this.__decorate||function(t,e,o,r){var n,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(n=t[l])&&(a=(i<3?n(a):i>3?n(e,o,a):n(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},c=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(){}return t.ɵprov=e.ɵɵdefineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t=l([e.Injectable({providedIn:"root"}),c("design:paramtypes",[])],t)}(),d=this&&this.__decorate||function(t,e,o,r){var n,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(n=t[l])&&(a=(i<3?n(a):i>3?n(e,o,a):n(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},u=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},p=function(){function t(){}return t.prototype.transform=function(t,e,r,n){return t?e&&r?!o.isNullOrUndefined(n)&&n.length>0?t.filter((function(t){return new RegExp(e,"gi").test(t.search)})):void 0:t:[]},t.prototype.matchValue=function(t,e){return Object.keys(t).map((function(o){return new RegExp(e,"gi").test(t[o])})).some((function(t){return t}))},t.prototype.matchValueParams=function(t,e,o){return o.map((function(o){return new RegExp(e,"gi").test(t[o])})).some((function(t){return t}))},t=d([e.Pipe({name:"filter"})],t)}(),f=function(){},m={provide:i.NG_VALUE_ACCESSOR,useExisting:e.forwardRef((function(){return h})),multi:!0},h=function(){function t(){this.visible=!1,this.filter=!1,this.selectedObject=new e.EventEmitter(!0),this.textChange=new e.EventEmitter(!0),this.timeout=500,this.minlength=2,this.loading=!1,this.disabled=!1,this.required=!1,this.formulario=new i.FormGroup({value:new i.FormControl(null)}),this.search="search",this._value="",this.onChange=function(t){},this.onTouched=function(){}}return t.prototype.ngOnInit=function(){var t=this;this.idcontainer=Math.random().toString().split(".")[1],this.filter||r.fromEvent(this.inputSearch.nativeElement,"keyup").pipe(n.map((function(t){return t.target.value})),n.filter((function(e){return e.length>=t.minlength})),n.debounceTime(this.timeout),n.distinctUntilChanged()).subscribe((function(e){t.value=e,t.visible=!0,t.textChange.emit(e)})),this.required&&this.set_validator(this.formulario,"value",this.required),this.formulario.controls.value.updateValueAndValidity()},t.prototype.set_validator=function(t,e,o){o?t.controls[e].setValidators([i.Validators.required]):t.controls[e].clearValidators(),t.controls[e].updateValueAndValidity()},t.prototype.select=function(t){this.selectedObject.emit(t),this.writeValue(t[this.search]),this.visible=!1},t.prototype.ngOnChanges=function(t){this.completar()},t.prototype.completar=function(){var t=this;this.data&&(this.data.forEach((function(e){var o=[];t.params.map((function(t){o.push(e[t])})),e[t.search]=o.join(" - ")})),setTimeout((function(){if(t.data&&t.reflectparam&&t.reflectvalue&&t.filter){var e=t.data.filter((function(e){return e[t.reflectparam]==t.reflectvalue}))[0];o.isNullOrUndefined(e)||(t.value=e[t.search],t.selectedObject.emit(e),t.textChange.emit(e[t.reflectparam]))}}),200)),this.formulario.controls.value.updateValueAndValidity()},t.prototype.onClick=function(t){var e=this,o=t.className.split(" "),r=o.filter((function(t){return"form-control-search"==t})),n=o.filter((function(t){return t==e.idcontainer}));this.visible=0!=r.length&&0!=n.length,this.formulario.controls.value.updateValueAndValidity()},Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(t){t!==this._value&&(this._value=t,this.formulario.controls.value.setValue(t),this.formulario.controls.value.updateValueAndValidity(),this.onChange(t))},enumerable:!0,configurable:!0}),t.prototype.writeValue=function(t){this._value=t,this.formulario.controls.value.setValue(t),this.formulario.controls.value.updateValueAndValidity(),this.onChange(t)},t.prototype.registerOnChange=function(t){this.onChange=t},t.prototype.registerOnTouched=function(t){this.onTouched=t},d([e.Input(),u("design:type",Array)],t.prototype,"params",void 0),d([e.Input(),u("design:type",Array)],t.prototype,"data",void 0),d([e.Input(),u("design:type",String)],t.prototype,"placeholder",void 0),d([e.Input(),u("design:type",Boolean)],t.prototype,"filter",void 0),d([e.Output(),u("design:type",Object)],t.prototype,"selectedObject",void 0),d([e.Output(),u("design:type",Object)],t.prototype,"textChange",void 0),d([e.Input(),u("design:type",Object)],t.prototype,"timeout",void 0),d([e.Input(),u("design:type",Object)],t.prototype,"minlength",void 0),d([e.Input(),u("design:type",Object)],t.prototype,"loading",void 0),d([e.Input(),u("design:type",Boolean)],t.prototype,"disabled",void 0),d([e.Input(),u("design:type",Object)],t.prototype,"reflectparam",void 0),d([e.Input(),u("design:type",Object)],t.prototype,"reflectvalue",void 0),d([e.Input(),u("design:type",Object)],t.prototype,"required",void 0),d([e.ViewChild("inputSearch",{static:!0}),u("design:type",e.ElementRef)],t.prototype,"inputSearch",void 0),d([e.HostListener("window:click",["$event.target"]),u("design:type",Function),u("design:paramtypes",[Object]),u("design:returntype",void 0)],t.prototype,"onClick",null),t=d([e.Component({selector:"cplx-autocomplete",template:'<div [formGroup]="formulario" class="search selection dropdown {{visible ? \'active\': \'\'}} box-search"\r\n\t[style.cursor]="disabled ? \'not-allowed\' : \'default\'">\r\n\t<input #inputSearch class="form-control form-control-sm form-control-search search {{idcontainer}}"\r\n\t\t(change)="selectedObject.emit(null)" autocomplete="off" formControlName="value" [placeholder]="placeholder"\r\n\t\t[ngClass]="{\'disabled\': disabled}">\r\n\t<div class="menu transition {{visible ? \'visible\': \'hidden\'}}" *ngIf="!disabled">\r\n\t\t<ng-container *ngIf="loading && !filter; else templateName">\r\n\t\t\t<div class="item">Buscando ...</div>\r\n\t\t</ng-container>\r\n\t\t<ng-template #templateName>\r\n\t\t\t<div *ngFor="let li of filter ? (data | filter : inputSearch.value : visible : params) : data" class="item"\r\n\t\t\t\t(click)="select(li)"> {{li[search]}}\r\n\t\t\t</div>\r\n\t\t</ng-template>\r\n\t</div>\r\n</div>\r\n\x3c!--input #inputSearch class="form-control form-control-sm" [(ngModel)]="value" [placeholder]="placeholder"\r\n\t(change)="selectedObject.emit(null)" [ngClass]="{\'disabled\': disabled}" list="browsers" autocomplete="off">\r\n<ng-container *ngIf="loading && !filter; else templateName">\r\n\t<datalist id="browsers">\r\n\t\t<option> Cargando ...</option>\r\n\t</datalist>\r\n</ng-container>\r\n<ng-template #templateName>\r\n\t<datalist id="browsers">\r\n\t\t<option *ngFor="let li of filter ? (data | filter : value : visible : params) : data"\r\n\t\t\t(click)="selectedObject.emit(li)" [value]="li[search]"> {{li[search]}}</option>\r\n\t</datalist>\r\n</ng-template--\x3e\r\n',providers:[m],styles:[".disabled{pointer-events:none!important;cursor:not-allowed!important;background-color:#e9ecef!important;opacity:1!important}.search.dropdown .menu{overflow-x:hidden;overflow-y:auto;-webkit-backface-visibility:hidden;backface-visibility:hidden;-webkit-overflow-scrolling:touch;max-height:14rem}.selection.dropdown .menu{overflow-x:hidden;overflow-y:auto;-webkit-backface-visibility:hidden;backface-visibility:hidden;-webkit-overflow-scrolling:touch;border-top-width:0!important;width:auto;outline:0;margin:0 -1px;min-width:calc(100% + 2px);width:calc(100% + 2px);border-radius:0 0 .28571429rem .28571429rem;box-shadow:0 2px 3px 0 rgba(34,36,38,.15);transition:opacity .1s}.dropdown .menu>.item:hover{background:rgba(0,0,0,.05);color:rgba(0,0,0,.95);z-index:13}.selection.dropdown .menu>.item{border-top:1px solid #fafafa;padding:.58571429rem 1.14285714rem!important;white-space:normal;word-wrap:normal}.dropdown .menu>.item{position:relative;cursor:pointer;display:block;border:none;height:auto;text-align:left;border-top:none;line-height:1em;color:rgba(0,0,0,.87);padding:.78571429rem 1.14285714rem!important;font-size:1rem;text-transform:none;font-weight:400;box-shadow:none;-webkit-touch-callout:none}.active.selection.dropdown{border-bottom-left-radius:0!important;border-bottom-right-radius:0!important}.selection.active.dropdown{border-color:#96c8da;box-shadow:0 2px 3px 0 rgba(34,36,38,.15)}.search.dropdown>input.search{border:none!important;box-shadow:none!important;cursor:text;top:0;left:1px;width:100%;outline:0;-webkit-tap-highlight-color:rgba(255,255,255,0)}.menu{border-color:#96c8da;box-shadow:0 2px 3px 0 rgba(34,36,38,.15)}.dropdown .menu{left:0;cursor:auto;position:absolute;display:none;outline:0;top:100%;min-width:-webkit-max-content;min-width:-moz-max-content;min-width:max-content;margin:0;padding:0;background:#fff;font-size:1em;text-shadow:none;text-align:left;box-shadow:0 2px 3px 0 rgba(34,36,38,.15);border:1px solid rgba(34,36,38,.15);border-radius:.28571429rem;transition:opacity .1s;z-index:11;will-change:transform,opacity}.visible.transition{display:block!important;visibility:visible!important;transition:.7s}.transition{-webkit-animation-iteration-count:1;animation-iteration-count:1;-webkit-animation-duration:.3s;animation-duration:.3s;-webkit-animation-timing-function:ease;animation-timing-function:ease;-webkit-animation-fill-mode:both;animation-fill-mode:both;transition:.7s}.form-control-search{height:calc(1.5em + .5rem + 2px);padding:.25rem .5rem;font-size:.875rem;line-height:1.5;border-radius:.2rem;border-bottom:0!important}.menu::-webkit-scrollbar{-webkit-appearance:none;width:10px;height:10px}.menu::-webkit-scrollbar-thumb{cursor:pointer;border-radius:5px;background:rgba(0,0,0,.25);-webkit-transition:color .2s;transition:color .2s}.menu::-webkit-scrollbar-track{background:rgba(0,0,0,.1);border-radius:0}::-moz-selection{background-color:#cce2ff;color:rgba(0,0,0,.87)}::selection{background-color:#cce2ff;color:rgba(0,0,0,.87)}.box-search{border-radius:.28571429rem!important;border:1px solid rgba(34,36,38,.15)!important}.box-search.ng-invalid.ng-touched{border-color:#dc3545!important}.box-search.ng-invalid.ng-touched:focus{border-color:#dc3545;box-shadow:0 0 0 .2rem rgba(220,53,69,.25)}"]}),u("design:paramtypes",[])],t)}(),b=this&&this.__decorate||function(t,e,o,r){var n,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(n=t[l])&&(a=(i<3?n(a):i>3?n(e,o,a):n(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a},g=function(){function t(){}return t=b([e.NgModule({declarations:[h,p],imports:[a.CommonModule,i.FormsModule,i.ReactiveFormsModule],exports:[h,p]})],t)}();t.CUSTOM_INPUT_CONTROL_VALUE_ACCESSOR=m,t.CplxAutocompleteComponent=h,t.CplxAutocompleteModule=g,t.CplxAutocompleteService=s,t.FilterPipe=p,t.ɵ0=f,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=cplx-autocomplete.umd.min.js.map