!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("util"),require("rxjs"),require("rxjs/operators"),require("@angular/forms"),require("@angular/common")):"function"==typeof define&&define.amd?define("cplx-autocomplete",["exports","@angular/core","util","rxjs","rxjs/operators","@angular/forms","@angular/common"],t):t((e=e||self)["cplx-autocomplete"]={},e.ng.core,e.util,e.rxjs,e.rxjs.operators,e.ng.forms,e.ng.common)}(this,(function(e,t,o,n,r,i,a){"use strict";var c=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(){}return e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e=c([t.Injectable({providedIn:"root"}),l("design:paramtypes",[])],e)}(),s=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(){function e(e,t,o){this.ngControl=e,this.renderer=t,this.elementRef=o}return e.prototype.hasRequiredField=function(e){if(e.validator){var t=e.validator({});if(t&&t.required)return!0}return!1},e.prototype.ngOnInit=function(){this.hasRequiredField(this.ngControl.control)&&this.renderer.setAttribute(this.elementRef.nativeElement,"required","")},e.ctorParameters=function(){return[{type:i.NgControl},{type:t.Renderer2},{type:t.ElementRef}]},e=s([t.Directive({selector:"[fieldrequired]"}),p("design:paramtypes",[i.NgControl,t.Renderer2,t.ElementRef])],e)}(),f=function(){function e(){}return e.prototype.transform=function(e,t,n,r){return e?t&&n?!o.isNullOrUndefined(r)&&r.length>0?e.filter((function(e){return new RegExp(t,"gi").test(e.search)})):void 0:e:[]},e.prototype.matchValue=function(e,t){return Object.keys(e).map((function(o){return new RegExp(t,"gi").test(e[o])})).some((function(e){return e}))},e.prototype.matchValueParams=function(e,t,o){return o.map((function(o){return new RegExp(t,"gi").test(e[o])})).some((function(e){return e}))},e=s([t.Pipe({name:"filter"})],e)}(),m=function(){},h={provide:i.NG_VALUE_ACCESSOR,useExisting:t.forwardRef((function(){return g})),multi:!0},g=function(){function e(){this.visible=!1,this.filter=!1,this.selectedObject=new t.EventEmitter(!0),this.textChange=new t.EventEmitter(!0),this.timeout=500,this.minlength=2,this.loading=!1,this.disabled=!1,this.required=!1,this.search="search",this._value="",this.onChange=function(e){},this.onTouched=function(){}}return e.prototype.ngOnInit=function(){var e=this;this.idcontainer=Math.random().toString().split(".")[1],this.filter||n.fromEvent(this.inputSearch.nativeElement,"keyup").pipe(r.map((function(e){return e.target.value})),r.filter((function(t){return t.length>=e.minlength})),r.debounceTime(this.timeout),r.distinctUntilChanged()).subscribe((function(t){e.value=t,e.visible=!0,e.textChange.emit(t)}))},e.prototype.select=function(e){this.selectedObject.emit(e),this.writeValue(e[this.search]),this.visible=!1},e.prototype.ngOnChanges=function(e){this.completar()},e.prototype.completar=function(){var e=this;this.data&&(this.data.forEach((function(t){var o=[];e.params.map((function(e){o.push(t[e])})),t[e.search]=o.join(" - ")})),setTimeout((function(){if(e.data&&e.reflectparam&&e.reflectvalue&&e.filter){var t=e.data.filter((function(t){return t[e.reflectparam]==e.reflectvalue}))[0];o.isNullOrUndefined(t)||(e.value=t[e.search],e.selectedObject.emit(t),e.textChange.emit(t[e.reflectparam]))}}),200))},e.prototype.onClick=function(e){var t=this,o=e.className.split(" "),n=o.filter((function(e){return"form-control-search"==e})),r=o.filter((function(e){return e==t.idcontainer}));this.visible=0!=n.length&&0!=r.length},Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(e){e!==this._value&&(this._value=e,this.onChange(e))},enumerable:!0,configurable:!0}),e.prototype.writeValue=function(e){this._value=e,this.onChange(e)},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},s([t.Input(),p("design:type",Array)],e.prototype,"params",void 0),s([t.Input(),p("design:type",Array)],e.prototype,"data",void 0),s([t.Input(),p("design:type",String)],e.prototype,"placeholder",void 0),s([t.Input(),p("design:type",Boolean)],e.prototype,"filter",void 0),s([t.Output(),p("design:type",Object)],e.prototype,"selectedObject",void 0),s([t.Output(),p("design:type",Object)],e.prototype,"textChange",void 0),s([t.Input(),p("design:type",Object)],e.prototype,"timeout",void 0),s([t.Input(),p("design:type",Object)],e.prototype,"minlength",void 0),s([t.Input(),p("design:type",Object)],e.prototype,"loading",void 0),s([t.Input(),p("design:type",Boolean)],e.prototype,"disabled",void 0),s([t.Input(),p("design:type",Object)],e.prototype,"reflectparam",void 0),s([t.Input(),p("design:type",Object)],e.prototype,"reflectvalue",void 0),s([t.Input(),p("design:type",Object)],e.prototype,"required",void 0),s([t.ViewChild("inputSearch",{static:!0}),p("design:type",t.ElementRef)],e.prototype,"inputSearch",void 0),s([t.HostListener("window:click",["$event.target"]),p("design:type",Function),p("design:paramtypes",[Object]),p("design:returntype",void 0)],e.prototype,"onClick",null),e=s([t.Component({selector:"cplx-autocomplete",template:'<div class="search selection dropdown {{visible ? \'active\': \'\'}} box-search"\r\n\t[style.cursor]="disabled ? \'not-allowed\' : \'default\'">\r\n\t<input #inputSearch class="form-control form-control-sm form-control-search search {{idcontainer}}"\r\n\t\t(change)="selectedObject.emit(null)" autocomplete="off" [(ngModel)]="value" [placeholder]="placeholder"\r\n\t\t[ngClass]="{\'disabled\': disabled}" [required]="required"\r\n\t\t[ngClass]="!required ? ( value == \'\' ? \'novalido\': \'valido\'): \'\'">\r\n\t<div class="menu transition {{visible ? \'visible\': \'hidden\'}}" *ngIf="!disabled">\r\n\t\t<ng-container *ngIf="loading && !filter; else templateName">\r\n\t\t\t<div class="item">Buscando ...</div>\r\n\t\t</ng-container>\r\n\t\t<ng-template #templateName>\r\n\t\t\t<div *ngFor="let li of filter ? (data | filter : inputSearch.value : visible : params) : data" class="item"\r\n\t\t\t\t(click)="select(li)"> {{li[search]}}\r\n\t\t\t</div>\r\n\t\t</ng-template>\r\n\t</div>\r\n</div>\r\n',providers:[h],styles:[".disabled{pointer-events:none!important;cursor:not-allowed!important;background-color:#e9ecef!important;opacity:1!important}.search.dropdown .menu{overflow-x:hidden;overflow-y:auto;-webkit-backface-visibility:hidden;backface-visibility:hidden;-webkit-overflow-scrolling:touch;max-height:14rem}.selection.dropdown .menu{overflow-x:hidden;overflow-y:auto;-webkit-backface-visibility:hidden;backface-visibility:hidden;-webkit-overflow-scrolling:touch;border-top-width:0!important;width:auto;outline:0;margin:0 -1px;min-width:calc(100% + 2px);width:calc(100% + 2px);border-radius:0 0 .28571429rem .28571429rem;box-shadow:0 2px 3px 0 rgba(34,36,38,.15);transition:opacity .1s}.dropdown .menu>.item:hover{background:rgba(0,0,0,.05);color:rgba(0,0,0,.95);z-index:13}.selection.dropdown .menu>.item{border-top:1px solid #fafafa;padding:.58571429rem 1.14285714rem!important;white-space:normal;word-wrap:normal}.dropdown .menu>.item{position:relative;cursor:pointer;display:block;border:none;height:auto;text-align:left;border-top:none;line-height:1em;color:rgba(0,0,0,.87);padding:.78571429rem 1.14285714rem!important;font-size:1rem;text-transform:none;font-weight:400;box-shadow:none;-webkit-touch-callout:none}.active.selection.dropdown{border-bottom-left-radius:0!important;border-bottom-right-radius:0!important}.selection.active.dropdown{border-color:#96c8da;box-shadow:0 2px 3px 0 rgba(34,36,38,.15)}.search.dropdown>input.search{box-shadow:none;cursor:text;top:0;left:1px;width:100%;outline:0;-webkit-tap-highlight-color:rgba(255,255,255,0)}.menu{border-color:#96c8da;box-shadow:0 2px 3px 0 rgba(34,36,38,.15)}.dropdown .menu{left:0;cursor:auto;position:absolute;display:none;outline:0;top:100%;min-width:-webkit-max-content;min-width:-moz-max-content;min-width:max-content;margin:0;padding:0;background:#fff;font-size:1em;text-shadow:none;text-align:left;box-shadow:0 2px 3px 0 rgba(34,36,38,.15);border:1px solid rgba(34,36,38,.15);border-radius:.28571429rem;transition:opacity .1s;z-index:11;will-change:transform,opacity}.visible.transition{display:block!important;visibility:visible!important;transition:.7s}.transition{-webkit-animation-iteration-count:1;animation-iteration-count:1;-webkit-animation-duration:.3s;animation-duration:.3s;-webkit-animation-timing-function:ease;animation-timing-function:ease;-webkit-animation-fill-mode:both;animation-fill-mode:both;transition:.7s}.form-control-search{height:calc(1.5em + .5rem + 2px);padding:.25rem .5rem;font-size:.875rem;line-height:1.5;border-radius:.2rem}.menu::-webkit-scrollbar{-webkit-appearance:none;width:10px;height:10px}.menu::-webkit-scrollbar-thumb{cursor:pointer;border-radius:5px;background:rgba(0,0,0,.25);-webkit-transition:color .2s;transition:color .2s}.menu::-webkit-scrollbar-track{background:rgba(0,0,0,.1);border-radius:0}::-moz-selection{background-color:#cce2ff;color:rgba(0,0,0,.87)}::selection{background-color:#cce2ff;color:rgba(0,0,0,.87)}.box-search{border-radius:.28571429rem}.form-control.ng-invalid.ng-touched:required{border-color:#dc3545}.form-control.ng-invalid.ng-touched:required:focus{border-color:#dc3545;box-shadow:0 0 0 .2rem rgba(220,53,69,.25)}.form-control.ng-valid,.form-control:valid{border-color:#28a745;padding-right:0;background-image:none!important;background-repeat:no-repeat;background-position:0;background-size:0}.form-control.valido{border-color:#28a745!important;padding-right:0;background-image:none!important;background-repeat:no-repeat;background-position:0;background-size:0}.form-control.novalido{border:1px solid #ced4da!important;padding-right:0;background-image:none!important;background-repeat:no-repeat;background-position:0;background-size:0}"]}),p("design:paramtypes",[])],e)}(),b=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},v=function(){function e(){}return e=b([t.NgModule({declarations:[g,f,u],imports:[a.CommonModule,i.FormsModule,i.ReactiveFormsModule],exports:[g,f,u]})],e)}();e.CUSTOM_INPUT_CONTROL_VALUE_ACCESSOR=h,e.CplxAutocompleteComponent=g,e.CplxAutocompleteModule=v,e.CplxAutocompleteService=d,e.FilterPipe=f,e.RequiredDirective=u,e.ɵ0=m,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=cplx-autocomplete.umd.min.js.map