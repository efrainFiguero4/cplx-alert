!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/forms"),require("rxjs/operators"),require("util"),require("rxjs"),require("@angular/common")):"function"==typeof define&&define.amd?define("cplx-autocomplete",["exports","@angular/core","@angular/forms","rxjs/operators","util","rxjs","@angular/common"],t):t((e=e||self)["cplx-autocomplete"]={},e.ng.core,e.ng.forms,e.rxjs.operators,e.util,e.rxjs,e.ng.common)}(this,(function(e,t,r,o,n,i,a){"use strict";var c=this&&this.__decorate||function(e,t,r,o){var n,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,r,a):n(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},d=function(){function e(){}return e.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e=c([t.Injectable({providedIn:"root"}),l("design:paramtypes",[])],e)}(),s=this&&this.__decorate||function(e,t,r,o){var n,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,r,a):n(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},u=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){function e(e,t,r){this.ngControl=e,this.renderer=t,this.elementRef=r}return e.prototype.hasRequiredField=function(e){if(e.validator){var t=e.validator({});if(t&&t.required)return!0}return!1},e.prototype.ngOnInit=function(){this.hasRequiredField(this.ngControl.control)&&this.renderer.setAttribute(this.elementRef.nativeElement,"required","")},e.ctorParameters=function(){return[{type:r.NgControl},{type:t.Renderer2},{type:t.ElementRef}]},e=s([t.Directive({selector:"[fieldrequired]"}),u("design:paramtypes",[r.NgControl,t.Renderer2,t.ElementRef])],e)}(),f=function(){function e(e,t,r){this.ngControl=e,this.renderer=t,this.elementRef=r}return e.prototype.hasRequiredField=function(e){return!!e.disabled&&e.disabled},e.prototype.ngOnInit=function(){this.hasRequiredField(this.ngControl.control)&&this.renderer.setAttribute(this.elementRef.nativeElement,"readonly","")},e.ctorParameters=function(){return[{type:r.NgControl},{type:t.Renderer2},{type:t.ElementRef}]},e=s([t.Directive({selector:"[fieldreadonly]"}),u("design:paramtypes",[r.NgControl,t.Renderer2,t.ElementRef])],e)}(),g=function(){function e(){}return e.prototype.transform=function(e,t,r,o){return e?t&&r?!n.isNullOrUndefined(o)&&o.length>0?e.filter((function(e){return new RegExp(t,"gi").test(e.search)})):void 0:e:[]},e.prototype.matchValue=function(e,t){return Object.keys(e).map((function(r){return new RegExp(t,"gi").test(e[r])})).some((function(e){return e}))},e.prototype.matchValueParams=function(e,t,r){return r.map((function(r){return new RegExp(t,"gi").test(e[r])})).some((function(e){return e}))},e=s([t.Pipe({name:"filter"})],e)}(),m={provide:r.NG_VALUE_ACCESSOR,useExisting:t.forwardRef((function(){return h})),multi:!0},h=function(){function e(){this.visible=!1,this.filter=!1,this.selectedObject=new t.EventEmitter(!0),this.textChange=new t.EventEmitter(!0),this.timeout=500,this.minlength=3,this.loading=!1,this.isdisabled=!1,this.isrequired=!1,this.search="search",this._value="",this.onChange=function(e){},this.onTouched=function(){}}return e.prototype.ngOnInit=function(){var e=this;this.idcontainer=Math.random().toString().split(".")[1],i.fromEvent(this.inputSearch.nativeElement,"keyup").pipe(o.map((function(e){return e.target.value})),o.filter((function(t){return!!e.filter||t.length>=e.minlength})),o.debounceTime(this.timeout),o.distinctUntilChanged()).subscribe((function(t){e.value=t,e.visible=!0,e.textChange.emit(t)}))},e.prototype.select=function(e){this.selectedObject.emit(e),this.writeValue(e[this.search]),this.visible=!1},e.prototype.ngOnChanges=function(e){this.completar()},e.prototype.completar=function(){var e=this;this.data&&(this.data.forEach((function(t){var r=[];e.params.map((function(e){r.push(t[e])})),t[e.search]=r.join(" - ")})),setTimeout((function(){if(e.data&&e.reflectparam&&e.reflectvalue&&e.filter){var t=e.data.filter((function(t){return t[e.reflectparam]==e.reflectvalue}))[0];n.isNullOrUndefined(t)||(e.value=t[e.search],e.selectedObject.emit(t),e.textChange.emit(t[e.reflectparam]))}}),200))},e.prototype.onClick=function(e){var t=this,r=e.className.split(" "),o=r.filter((function(e){return"input-search"==e})),n=r.filter((function(e){return e==t.idcontainer}));0==o.length&&0==n.length&&(this.visible=!1)},Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(e){e!==this._value&&(this._value=e,this.onChange(e))},enumerable:!0,configurable:!0}),e.prototype.writeValue=function(e){this._value=e,this.onChange(e)},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},s([t.Input(),u("design:type",Array)],e.prototype,"params",void 0),s([t.Input(),u("design:type",Array)],e.prototype,"data",void 0),s([t.Input(),u("design:type",String)],e.prototype,"placeholder",void 0),s([t.Input(),u("design:type",Boolean)],e.prototype,"filter",void 0),s([t.Output(),u("design:type",Object)],e.prototype,"selectedObject",void 0),s([t.Output(),u("design:type",Object)],e.prototype,"textChange",void 0),s([t.Input(),u("design:type",Object)],e.prototype,"timeout",void 0),s([t.Input(),u("design:type",Object)],e.prototype,"minlength",void 0),s([t.Input(),u("design:type",Object)],e.prototype,"loading",void 0),s([t.Input(),u("design:type",Boolean)],e.prototype,"isdisabled",void 0),s([t.Input(),u("design:type",Object)],e.prototype,"reflectparam",void 0),s([t.Input(),u("design:type",Object)],e.prototype,"reflectvalue",void 0),s([t.Input(),u("design:type",Boolean)],e.prototype,"isrequired",void 0),s([t.ViewChild("inputSearch",{static:!0}),u("design:type",t.ElementRef)],e.prototype,"inputSearch",void 0),s([t.HostListener("window:click",["$event.target"]),u("design:type",Function),u("design:paramtypes",[Object]),u("design:returntype",void 0)],e.prototype,"onClick",null),e=s([t.Component({selector:"cplx-autocomplete",template:'<div class="search dropdown {{visible ? \'active\': \'\'}}" [ngClass]="{\'disabled\': isdisabled}">\r\n\t<input #inputSearch class="form-control form-control-sm search {{idcontainer}} input-search"\r\n\t\t(change)="selectedObject.emit(null)" autocomplete="off" [(ngModel)]="value" [placeholder]="placeholder"\r\n\t\t[required]="isrequired" [ngClass]="!isrequired ? ( value == \'\' ? \'novalido\': \'\'): \'\'"\r\n\t\t(click)="visible = !filter ? value?.length >= minlength : true">\r\n\t<div class="menu transition {{visible ? \'visible\': \'hidden\'}}" *ngIf="!isdisabled">\r\n\t\t<ng-container *ngIf="loading && !filter; else templateName">\r\n\t\t\t<div class="item">Buscando ...</div>\r\n\t\t</ng-container>\r\n\t\t<ng-template #templateName>\r\n\t\t\t<div *ngFor="let li of filter ? (data | filter : value : visible : params) : data" class="item"\r\n\t\t\t\t(click)="select(li)"> {{li[search]}}\r\n\t\t\t</div>\r\n\t\t</ng-template>\r\n\t</div>\r\n</div>\r\n',providers:[m],styles:[".disabled input{pointer-events:none!important;cursor:not-allowed!important;background-color:#e9ecef!important;opacity:1!important}.search.dropdown.active input{border-bottom-left-radius:0!important;border-bottom-right-radius:0!important;border-bottom:0!important}.search.dropdown .menu{overflow-x:hidden;overflow-y:auto;-webkit-backface-visibility:hidden;backface-visibility:hidden;-webkit-overflow-scrolling:touch;max-height:14rem}.dropdown .menu>.item:hover{background:rgba(0,0,0,.05);color:rgba(0,0,0,.95);z-index:13}.dropdown .menu>.item{border-top:1px solid #fafafa;white-space:normal;word-wrap:normal;position:relative;cursor:pointer;display:block;border:none;height:auto;text-align:left;border-top:none;line-height:1em;color:rgba(0,0,0,.87);padding:.78571429rem 1.14285714rem!important;font-size:1rem;text-transform:none;font-weight:400;box-shadow:none;-webkit-touch-callout:none}.active.dropdown{border-bottom-left-radius:0!important;border-bottom-right-radius:0!important;border-color:#96c8da;box-shadow:0 2px 3px 0 rgba(34,36,38,.15)}.search.dropdown>input.search{box-shadow:none;cursor:text;top:0;left:1px;width:100%;outline:0;-webkit-tap-highlight-color:rgba(255,255,255,0)}.menu{border-color:#96c8da;box-shadow:0 2px 3px 0 rgba(34,36,38,.15)}.dropdown .menu{cursor:auto;position:absolute;display:block;outline:0;top:100%;margin:0;padding:0;background:#fff;font-size:1em;text-shadow:none;text-align:left;box-shadow:0 2px 3px 0 rgba(34,36,38,.15);border:1px solid rgba(34,36,38,.15);border-radius:.28571429rem;z-index:11}.transition{-webkit-animation-iteration-count:1;animation-iteration-count:1;-webkit-animation-duration:.5s;animation-duration:.5s;-webkit-animation-timing-function:ease;animation-timing-function:ease;-webkit-animation-fill-mode:both;animation-fill-mode:both;transition:.5s}.transition.visible{min-width:calc(100% + 2px);width:calc(100% + 2px);max-height:14rem;opacity:1!important;border-top-left-radius:0!important;border-top-right-radius:0!important}.transition.hidden{height:0;opacity:0!important}.menu::-webkit-scrollbar{-webkit-appearance:none;width:10px;height:10px}.menu::-webkit-scrollbar-thumb{cursor:pointer;border-radius:5px;background:rgba(0,0,0,.25);-webkit-transition:color .2s;transition:color .2s}.menu::-webkit-scrollbar-track{background:rgba(0,0,0,.1);border-radius:0}::-moz-selection{background-color:#cce2ff;color:rgba(0,0,0,.87)}::selection{background-color:#cce2ff;color:rgba(0,0,0,.87)}.form-control.ng-invalid.ng-touched[required]{border-color:#dc3545;padding-right:calc(1.5em + .75rem);background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='none' stroke='%23dc3545' viewBox='0 0 12 12'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e\");background-repeat:no-repeat;background-position:right calc(.375em + .1875rem) center;background-size:calc(.75em + .375rem) calc(.75em + .375rem)}.form-control.ng-invalid.ng-touched[required]:focus{border-color:#dc3545;box-shadow:0 0 0 .2rem rgba(220,53,69,.25);padding-right:calc(1.5em + .75rem);background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='none' stroke='%23dc3545' viewBox='0 0 12 12'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e\");background-repeat:no-repeat;background-position:right calc(.375em + .1875rem) center;background-size:calc(.75em + .375rem) calc(.75em + .375rem)}.form-control.ng-valid[required=true],.form-control.ng-valid[required],.form-control[required]:valid{border-color:#28a745;padding-right:0;background-image:none!important;background-repeat:no-repeat;background-position:0;background-size:0}.form-control:valid{border-color:#ced4da;padding-right:0;background-image:none!important;background-repeat:no-repeat;background-position:0;background-size:0}.form-control:valid:focus{border-color:#ced4da;padding-right:0;background-image:none!important;background-repeat:no-repeat;background-position:0;background-size:0}.form-control.novalido{border:1px solid #ced4da!important;padding-right:0;background-image:none!important;background-repeat:no-repeat;background-position:0;background-size:0}"]}),u("design:paramtypes",[])],e)}(),b=this&&this.__decorate||function(e,t,r,o){var n,i=arguments.length,a=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(a=(i<3?n(a):i>3?n(t,r,a):n(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a},v=function(){function e(){}return e=b([t.NgModule({declarations:[h,g,p],imports:[a.CommonModule,r.FormsModule,r.ReactiveFormsModule],exports:[h,g,p]})],e)}();e.CUSTOM_INPUT_CONTROL_VALUE_ACCESSOR=m,e.CplxAutocompleteComponent=h,e.CplxAutocompleteModule=v,e.CplxAutocompleteService=d,e.FilterPipe=g,e.ReadOnlyDirective=f,e.RequiredDirective=p,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=cplx-autocomplete.umd.min.js.map