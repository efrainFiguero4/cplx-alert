!function(t,a){"object"==typeof exports&&"undefined"!=typeof module?a(exports,require("@angular/core"),require("@angular/common"),require("@angular/forms"),require("util")):"function"==typeof define&&define.amd?define("cplx-datatable",["exports","@angular/core","@angular/common","@angular/forms","util"],a):a(t["cplx-datatable"]={},t.ng.core,t.ng.common,t.ng.forms,t.util)}(this,function(t,a,n,i,e){"use strict";var r=function g(){this.actual=1,this.porpagina=30,this.paginasmostrar=5,this.paginas=[]},o=function d(){this.pagination=!1,this.search=!1},s=function(){function t(){}return t.prototype.crear_data_paginado=function(t,a,n){for(var i={},e=n,r=0,o=1;o<=a;o++)o==a&&(e=t.length),i["pagina"+o]=t.slice(r,r+e),r+=e;return i},t.prototype.crear_paginacion=function(t,a,n){var i=new r;i.totalitem=t,i.totalpaginas=Math.ceil(t/n)||0,i.paginas=this.getPages(t,n,a,i.paginasmostrar),1==(i.actual=a)&&1<i.totalpaginas?(i.atras=a,i.siguiente=a+1):a==i.totalpaginas?(i.atras=a-1,i.siguiente=a):i.paginas.length==a?(i.atras=a,i.actual=a,i.siguiente=a):(i.atras=a-1,i.siguiente=a+1),i.porpagina=n,i.desde=n*a-n+1;var e=n*a;return i.hasta=t<e?t:e,console.log(i),i},t.prototype.getPages=function(t,a,n,i){var e=Math.ceil(t/a),r=n||1,o=i||9,s=[];s.push(r);for(var p=o-1,l=0;l<p;l++)s.length<o&&1<Math.min.apply(null,s)&&s.push(Math.min.apply(null,s)-1),s.length<o&&Math.max.apply(null,s)<e&&s.push(Math.max.apply(null,s)+1);return s.sort(function(t,a){return t-a}),s},t.decorators=[{type:a.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[]},t.ngInjectableDef=a.defineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}(),p=function(){function t(t){this._cplxdatatableservice=t,this.search="",this.paginacion=new r,this.itemlistpaginates={},this.ls_paginas=[],this.defaultpages=[20,30,50,100]}return t.prototype.ngOnInit=function(){},t.prototype.ngOnChanges=function(t){this.loading=!0,this.ls_paginas=e.isNullOrUndefined(this.pages)?this.defaultpages:this.pages,e.isNullOrUndefined(this.config)?(this.config=new o,this.itemlistcurrentpage=this.itemlist):this.config.pagination&&(this.paginacion.actual=1,this.paginacion.paginasmostrar=3,this.paginacion.porpagina=10,this.paginacion=this._cplxdatatableservice.crear_paginacion(this.itemlist.length,this.paginacion.actual,this.paginacion.porpagina),this.itemlistpaginates=this._cplxdatatableservice.crear_data_paginado(this.itemlist,this.paginacion.totalpaginas,this.paginacion.porpagina),this.go_page(this.paginacion.totalitem,this.paginacion.actual,this.paginacion.porpagina)),this.loading=!1},t.prototype.search_data=function(a){var n=this;return this.searchparam={},this.content.forEach(function(t){n.searchparam[t.toString()]=a}),this.searchparam},t.prototype.go_page=function(t,a,n){this.paginacion.actual=a,this.paginacion=this._cplxdatatableservice.crear_paginacion(t,a,n),this.itemlistcurrentpage=this.itemlistpaginates["pagina"+a]},t.prototype.go_porpage=function(t){this.loading=!0,this.paginacion.porpagina=t,this.itemlistpaginates={},this.itemlistcurrentpage=[],this.paginacion=this._cplxdatatableservice.crear_paginacion(this.itemlist.length,1,t),this.itemlistpaginates=this._cplxdatatableservice.crear_data_paginado(this.itemlist,this.paginacion.totalpaginas,this.paginacion.porpagina),this.itemlistcurrentpage=this.itemlistpaginates["pagina"+this.paginacion.actual],this.loading=!1},t.decorators=[{type:a.Component,args:[{selector:"cplx-datatable",template:'<div class="row align-items-center">\r\n\t<div class="col-sm-6">\r\n\t\t<input *ngIf="config.search" type="text" placeholder="Buscar" [(ngModel)]="search"\r\n\t\t\tclass="form-control form-control-sm">\r\n\t</div>\r\n\t<div class="col-sm-6">\r\n\t\t<div class="d-flex flex-row py-2 align-items-center bg-sura" *ngIf="config.pagination">\r\n\t\t\t<div class="ml-auto" *ngIf="paginacion.totalitem > 0">\r\n\t\t\t\t<ul class="pagination pagination-sm m-0 align-items-center">\r\n\t\t\t\t\t<li class="list-inline-item text-primary">\r\n\t\t\t\t\t\tdesde {{ paginacion.desde }} al {{ paginacion.hasta }} de {{ paginacion.totalitem }}</li>\r\n\t\t\t\t\t<li class="list-inline-item text-primary pr-4">\r\n\t\t\t\t\t\t| {{paginacion.totalpaginas + \' Páginas\'}}\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li [ngClass]="{\'disabled\': paginacion.actual == 1}"\r\n\t\t\t\t\t\t(click)="go_page(paginacion.totalitem,paginacion.atras,paginacion.porpagina)" class="page-item">\r\n\t\t\t\t\t\t<a class="page-link">Previous</a>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li (click)="pag == paginacion.actual ? \'\' : go_page(paginacion.totalitem,pag,paginacion.porpagina)"\r\n\t\t\t\t\t\tclass="page-item" [ngClass]="{\'active\': pag == paginacion.actual}"\r\n\t\t\t\t\t\t*ngFor="let pag of paginacion?.paginas">\r\n\t\t\t\t\t\t<a class="page-link">{{pag}}</a>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t\t<li [ngClass]="{\'disabled\' : paginacion.actual == paginacion.totalpaginas}"\r\n\t\t\t\t\t\t(click)="go_page(paginacion.totalitem,paginacion.siguiente,paginacion.porpagina)"\r\n\t\t\t\t\t\tclass="page-item">\r\n\t\t\t\t\t\t<a class="page-link">Next</a>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t\t<div class="pl-5" *ngIf="paginacion.totalitem > 0">\r\n\t\t\t\t<div class="dropdown">\r\n\t\t\t\t\t<a class="btn btn-success btn-sm dropdown-toggle" role="button" data-toggle="dropdown"\r\n\t\t\t\t\t\taria-haspopup="true" aria-expanded="false">\r\n\t\t\t\t\t\t{{paginacion.porpagina}} Páginas\r\n\t\t\t\t\t</a>\r\n\t\t\t\t\t<div class="dropdown-menu dropdown-menu-right">\r\n\t\t\t\t\t\t<a class="dropdown-item" *ngFor="let pag of pages" (click)="go_porpage(pag)">{{pag}} Páginas</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n<div class="table-responsive">\r\n\t<table class="table table-sura table-bordered table-hover">\r\n\t\t<thead class="table-thead">\r\n\t\t\t<tr>\r\n\t\t\t\t<th class="text-center w-5" *ngFor="let cabecera of header"> {{cabecera}}</th>\r\n\t\t\t</tr>\r\n\t\t</thead>\r\n\t\t<tbody *ngIf="!loading && itemlistcurrentpage?.length">\r\n\t\t\t<tr *ngFor="let item of itemlistcurrentpage | datatablepipe : search != \'\' ? search_data(search) :\'\'">\r\n\t\t\t\t<td *ngFor="let c of content">{{item[c]}}</td>\r\n\t\t\t</tr>\r\n\t\t</tbody>\r\n\t</table>\r\n\t<div class="w-100 text-center text-bold-sura" *ngIf="!itemlistcurrentpage?.length || loading"> <i\r\n\t\t\tclass="fa fa-spin fa-pulse"></i>\r\n\t\t<i *ngIf="loading" class="fa fa-spinner fa-pulse"></i>\r\n\t\t{{loading ? \'CARGANDO ...\' : (!itemlistcurrentpage?.length ? \'-- No se encontraron registros --\' : \'\')}}\r\n\t</div>\r\n</div>\r\n',styles:[".pagination .page-item.active a{color:#fff!important;background-color:#0039ae!important;font-weight:700}.dropdown .dropdown-menu{box-shadow:0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.15);-moz-box-shadow:0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.15);-webkit-box-shadow:0 2px 4px 0 rgba(34,36,38,.12),0 2px 10px 0 rgba(34,36,38,.15);transition:.3s;font-size:14px;max-height:0;display:block;overflow:hidden;opacity:0}.dropdown:hover .dropdown-menu{max-height:250px;opacity:1}.dropdown-menu{margin:0!important;border-radius:0!important;font-size:13px!important}.text-bold-sura{color:#0039ae!important;font-weight:700!important;font-family:'Trebuchet MS'!important}.text-bold{font-weight:700!important}.text-sura{font-size:12px!important;color:#0039ae!important;font-family:'Trebuchet MS'!important}.bg-sura{background-color:#eaf0f8!important;font-family:'Trebuchet MS'!important}.col-form-label{font-size:13px!important;line-height:1.5!important;color:#0039ae!important;font-family:'Trebuchet MS'}.table thead th{color:#0039a6!important;background-color:#eaf0f8!important;font-size:10px!important}.table.table-sura{border-top:1px solid silver!important;border-left:1px solid silver!important}.table td,.table th{padding:.75rem;font-size:11px}.table td{color:#706f6f!important}.table-active td{color:#0039a6!important;background-color:#e3d829!important;font-weight:700!important}.texto{font-size:10px;font-family:'Trebuchet MS'!important;text-align:justify;text-decoration:none}.table-bordered td,.table-bordered th{font-family:'Trebuchet MS'}"]}]}],t.ctorParameters=function(){return[{type:s}]},t.propDecorators={itemlist:[{type:a.Input}],header:[{type:a.Input}],content:[{type:a.Input}],loading:[{type:a.Input}],search:[{type:a.Input}],config:[{type:a.Input}],pages:[{type:a.Input}]},t}(),l=function(){function t(){}return t.prototype.transform=function(t,n){if(!n)return t;if(e.isNullOrUndefined(n)||""==n)return t;if(!Array.isArray(t))return t;if(n&&Array.isArray(t)){var i=Object.keys(n);return t.filter(function(a){return i.some(function(t){return new RegExp(String(n[t]).trim(),"gi").test(a[t])||""==n[t]})})}},t.decorators=[{type:a.Pipe,args:[{name:"datatablepipe"}]}],t}(),c=function(){function t(){}return t.decorators=[{type:a.NgModule,args:[{declarations:[p,l],imports:[n.CommonModule,i.FormsModule,i.ReactiveFormsModule],exports:[p],providers:[s]}]}],t}();t.Paginacion=r,t.ConfigDataTable=o,t.CplxDatatableService=s,t.CplxDatatableComponent=p,t.SearchPipe=l,t.CplxDatatableModule=c,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=cplx-datatable.umd.min.js.map