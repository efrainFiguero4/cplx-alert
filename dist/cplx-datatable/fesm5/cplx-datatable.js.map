{"version":3,"file":"cplx-datatable.js.map","sources":["ng://cplx-datatable/lib/cplx-datatable.service.ts","ng://cplx-datatable/lib/cplx-datatable.component.ts","ng://cplx-datatable/lib/cplx-datatable.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\nexport class Paginacion {\n\tdesde: number;\n\thasta: number;\n\tatras: number;\n\tactual: number = 1;\n\tsiguiente: number;\n\ttotalitem: number;\n\ttotalpaginas: number;\n\tporpagina: number = 30;\n\tpaginasmostrar = 5;\n\tpaginas: number[] = [];\n}\n\nexport class ConfigDataTable {\n\tpagination: boolean = false;\n\tsearch: boolean = false;\n}\n\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class CplxDatatableService {\n\n\tconstructor() { }\n\n\n\tcrear_data_paginado(datalista: any[], totalpaginas: number, porpagina: number) {\n\t\tvar paginado = {};\n\t\tvar porpaginaactual = porpagina;\n\t\tvar posactual = 0;\n\t\tfor (let index = 1; index <= totalpaginas; index++) {\n\t\t\tif (index == totalpaginas)\n\t\t\t\tporpaginaactual = datalista.length;\n\t\t\tpaginado[\"pagina\" + index] = datalista.slice(posactual, posactual + porpaginaactual);\n\t\t\tposactual = posactual + porpaginaactual;\n\t\t}\n\t\treturn paginado;\n\t}\n\n\tcrear_paginacion(totalitems: number, paginaactual: number, porpagina: number) {\n\t\tvar paginacion = new Paginacion();\n\t\tpaginacion.totalitem = totalitems;\n\t\tpaginacion.totalpaginas = Math.ceil(totalitems / porpagina) || 0;\n\t\tpaginacion.paginas = this.getPages(totalitems, porpagina, paginaactual, paginacion.paginasmostrar);\n\t\tpaginacion.actual = paginaactual;\n\t\tif (paginaactual == 1 && paginacion.totalpaginas > 1) {\n\t\t\tpaginacion.atras = paginaactual;\n\t\t\tpaginacion.siguiente = paginaactual + 1;\n\t\t} else if (paginaactual == paginacion.totalpaginas) {\n\t\t\tpaginacion.atras = paginaactual - 1;\n\t\t\tpaginacion.siguiente = paginaactual;\n\t\t} else if (paginacion.paginas.length == paginaactual) {\n\t\t\tpaginacion.atras = paginaactual;\n\t\t\tpaginacion.actual = paginaactual;\n\t\t\tpaginacion.siguiente = paginaactual;\n\t\t} else {\n\t\t\tpaginacion.atras = paginaactual - 1;\n\t\t\tpaginacion.siguiente = paginaactual + 1;\n\t\t}\n\t\tpaginacion.porpagina = porpagina;\n\t\tpaginacion.desde = ((porpagina * paginaactual) - porpagina) + 1;\n\n\t\tvar maximoitems = porpagina * paginaactual;\n\t\tpaginacion.hasta = maximoitems > totalitems ? totalitems : maximoitems;\n\t\tconsole.log(paginacion);\n\t\treturn paginacion;\n\t}\n\n\tgetPages(totalitems: number, porpagina: number, paginactual: number, paginasmostrar: number): number[] {\n\t\tconst c = Math.ceil(totalitems / porpagina);\n\t\tconst p = paginactual || 1;\n\t\tconst pagesToShow = paginasmostrar || 9;\n\t\tconst pages: number[] = [];\n\t\tpages.push(p);\n\t\tconst times = pagesToShow - 1;\n\t\tfor (let i = 0; i < times; i++) {\n\t\t\tif (pages.length < pagesToShow) {\n\t\t\t\tif (Math.min.apply(null, pages) > 1) {\n\t\t\t\t\tpages.push(Math.min.apply(null, pages) - 1);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (pages.length < pagesToShow) {\n\t\t\t\tif (Math.max.apply(null, pages) < c) {\n\t\t\t\t\tpages.push(Math.max.apply(null, pages) + 1);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tpages.sort((a, b) => a - b);\n\t\treturn pages;\n\t}\n\n}\n","import { Component, OnInit, Input, OnChanges, SimpleChanges } from '@angular/core';\nimport { Paginacion, CplxDatatableService, ConfigDataTable } from './cplx-datatable.service';\nimport { isNullOrUndefined } from 'util';\n\n@Component({\n\tselector: 'cplx-datatable',\n\ttemplateUrl: './cplx-datatable.component.html',\n\tstyleUrls: ['./cplx-datatable.component.css']\n})\nexport class CplxDatatableComponent implements OnInit, OnChanges {\n\n\t@Input() itemlist: any[];\n\t@Input() header: string[];\n\t@Input() content: string[];\n\t@Input() loading: boolean;\n\t@Input() search: string = \"\";\n\t@Input() config: ConfigDataTable | null;\n\t@Input() pages: number[];\n\n\tconstructor(private _cplxdatatableservice: CplxDatatableService) { }\n\n\tpaginacion = new Paginacion();\n\tsearchparam: any | {};\n\titemlistpaginates = {};\n\titemlistcurrentpage: any[];\n\n\tls_paginas: number[] = [];\n\n\tdefaultpages = [20, 30, 50, 100];\n\n\tngOnInit() { }\n\n\tngOnChanges(changes: SimpleChanges): void {\n\t\tthis.loading = true;\n\t\tthis.ls_paginas = isNullOrUndefined(this.pages) ? this.defaultpages : this.pages;\n\n\t\tif (isNullOrUndefined(this.config)) {\n\t\t\tthis.config = new ConfigDataTable;\n\t\t\tthis.itemlistcurrentpage = this.itemlist;\n\t\t} else {\n\t\t\tif (this.config.pagination) {\n\t\t\t\tthis.paginacion.actual = 1;\n\t\t\t\tthis.paginacion.paginasmostrar = 3;\n\t\t\t\tthis.paginacion.porpagina = 10;\n\t\t\t\tthis.paginacion = this._cplxdatatableservice.crear_paginacion(this.itemlist.length, this.paginacion.actual, this.paginacion.porpagina);\n\t\t\t\tthis.itemlistpaginates = this._cplxdatatableservice.crear_data_paginado(this.itemlist, this.paginacion.totalpaginas, this.paginacion.porpagina);\n\t\t\t\tthis.go_page(this.paginacion.totalitem, this.paginacion.actual, this.paginacion.porpagina);\n\t\t\t}\n\t\t}\n\t\tthis.loading = false;\n\t}\n\n\tsearch_data(value: string) {\n\t\tthis.searchparam = {};\n\t\tthis.content.forEach(element => {\n\t\t\tthis.searchparam[element.toString()] = value;\n\t\t});\n\t\treturn this.searchparam;\n\t}\n\n\tgo_page(totalitem: number, pagina: number, porpagina: number) {\n\t\tthis.paginacion.actual = pagina;\n\t\tthis.paginacion = this._cplxdatatableservice.crear_paginacion(totalitem, pagina, porpagina)\n\t\tthis.itemlistcurrentpage = this.itemlistpaginates[\"pagina\" + pagina];\n\t}\n\n\tgo_porpage(porpagina: number) {\n\t\tthis.loading = true;\n\t\tthis.paginacion.porpagina = porpagina;\n\t\tthis.itemlistpaginates = {};\n\t\tthis.itemlistcurrentpage = [];\n\t\tthis.paginacion = this._cplxdatatableservice.crear_paginacion(this.itemlist.length, 1, porpagina);\n\t\tthis.itemlistpaginates = this._cplxdatatableservice.crear_data_paginado(this.itemlist, this.paginacion.totalpaginas, this.paginacion.porpagina);\n\t\tthis.itemlistcurrentpage = this.itemlistpaginates[\"pagina\" + this.paginacion.actual];\n\t\tthis.loading = false;\n\t}\n\n}\n","import { NgModule } from '@angular/core';\nimport { CplxDatatableComponent } from './cplx-datatable.component';\nimport { CommonModule } from '@angular/common';\nimport { Pipe, PipeTransform } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms'\nimport { CplxDatatableService } from './cplx-datatable.service';\nimport { isNullOrUndefined } from 'util';\n\n@Pipe({\n\tname: 'datatablepipe'\n})\nexport class SearchPipe implements PipeTransform {\n\ttransform(items: any, filter: any): any {\n\t\tif (!filter)\n\t\t\treturn items;\n\t\tif (isNullOrUndefined(filter) || filter == \"\")\n\t\t\treturn items;\n\t\tif (!Array.isArray(items))\n\t\t\treturn items;\n\n\t\tif (filter && Array.isArray(items)) {\n\t\t\tlet filterKeys = Object.keys(filter);\n\t\t\treturn items.filter(item => {\n\t\t\t\treturn filterKeys.some((keyName) => {\n\t\t\t\t\treturn new RegExp(String(filter[keyName]).trim(), 'gi').test(item[keyName]) || filter[keyName] == \"\";\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n}\n\n\n@NgModule({\n\tdeclarations: [CplxDatatableComponent, SearchPipe],\n\timports: [CommonModule, FormsModule, ReactiveFormsModule],\n\texports: [CplxDatatableComponent],\n\tproviders: [CplxDatatableService]\n})\n\nexport class CplxDatatableModule { }\n"],"names":[],"mappings":"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"}
