{"version":3,"file":"cplx-alert.js","sources":["ng://cplx-alert/lib/cplx-alert.service.ts","ng://cplx-alert/lib/cplx-alert.component.ts","ng://cplx-alert/lib/cplx-alert.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { Observable, Subject } from 'rxjs';\r\nimport { Router, NavigationStart } from '@angular/router';\r\n\r\n\r\nexport interface Alert {\r\n\tmensaje?: string;\r\n\ttipo?: AlertType;\r\n\tclass?: string;\r\n\tid?: string\r\n\ttime?: number;\r\n}\r\n\r\nexport enum AlertType {\r\n\tNone,\r\n\tSuccess,\r\n\tError,\r\n\tWarning,\r\n\tInfo\r\n}\r\n\r\n@Injectable({\r\n\tprovidedIn: 'root'\r\n})\r\n\r\nexport class CplxAlertService {\r\n\r\n\tprivate routerchange = false;\r\n\r\n\tconstructor(private router: Router) {\r\n\t\tthis.router.events.subscribe(event => {\r\n\t\t\tif (event instanceof NavigationStart) {\r\n\t\t\t\tif (this.routerchange) {\r\n\t\t\t\t\tthis.routerchange = false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.clear();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tprivate alerta = new Subject<Alert>();\r\n\r\n\tadd(mensaje: Alert) {\r\n\t\tmensaje.class = \"ns-show\"\r\n\t\tmensaje.id = Math.random().toString().split(\".\")[1];\r\n\t\tthis.alerta.next(mensaje);\r\n\t};\r\n\r\n\tgetAlertas(): Observable<Alert> {\r\n\t\treturn this.alerta.asObservable();\r\n\t}\r\n\r\n\tclear() {\r\n\t\tthis.alerta.next();\r\n\t}\r\n}\r\n","import { Component, OnDestroy, Input, OnChanges, SimpleChanges } from '@angular/core';\r\nimport { Alert, CplxAlertService, AlertType } from './cplx-alert.service';\r\nimport { isNullOrUndefined } from 'util';\r\nimport { Subscription } from 'rxjs';\r\n\r\n@Component({\r\n\tselector: 'cplx-alert',\r\n\ttemplateUrl: './cplx-alert.component.html',\r\n\tstyleUrls: ['./cplx-alert.component.css']\r\n})\r\n\r\nexport class CplxAlertComponent implements OnDestroy, OnChanges {\r\n\r\n\tsubscription: Subscription;\r\n\t@Input() alertas = new Array<Alert>();\r\n\t@Input() timeout: number;\r\n\r\n\tconstructor(private _sms: CplxAlertService) {\r\n\t\tthis.subscription = this._sms.getAlertas().subscribe((alert: Alert) => {\r\n\t\t\tif (alert && !isNullOrUndefined(alert.mensaje)) {\r\n\t\t\t\tif (!this.validate_mensaje(alert)) {\r\n\t\t\t\t\tthis.alertas.push(alert);\r\n\t\t\t\t\tlet timeout = isNullOrUndefined(this.timeout) ? 5000 : this.timeout;\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.removerMensaje(alert, alert.id);\r\n\t\t\t\t\t}, timeout)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tngOnChanges(changes: SimpleChanges): void {\r\n\t\tif (this.alertas.length > 0) {\r\n\t\t\tfor (let index = 1; index < this.alertas.length; index++) {\r\n\t\t\t\tlet timeout = (isNullOrUndefined(this.timeout) ? 5000 : this.timeout) + index + 1;\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.removerMensaje(this.alertas[index], this.alertas[index].id);\r\n\t\t\t\t}, timeout)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tngOnDestroy() {\r\n\t\tif (!isNullOrUndefined(this.subscription))\r\n\t\t\tthis.subscription.unsubscribe();\r\n\t}\r\n\r\n\tvalidate_mensaje(mensaje: Alert) {\r\n\t\tif (this.alertas.length)\r\n\t\t\tfor (const alerta of this.alertas)\r\n\t\t\t\tif (alerta.mensaje == mensaje.mensaje) return true;\r\n\t\treturn false;\r\n\t}\r\n\r\n\r\n\tremoverMensaje(alert: Alert, id: string) {\r\n\t\talert.class = 'ns-hide';\r\n\t\tsetTimeout(() => {\r\n\t\t\tlet idx = this.alertas.findIndex(a => a.id == id);\r\n\t\t\tthis.alertas.splice(idx, 1);\r\n\t\t}, 230);\r\n\t}\r\n\r\n\t//[ngClass]=\"{'alert-success text-success': m.tipo == 1 ,'alert-danger text-danger':m.tipo == 2 ,'alert-warning text-warning':m.tipo == 3 ,'alert-primary text-primary':m.tipo == 4}\"\r\n\tcssClass(alert: Alert) {\r\n\t\tif (!alert) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tswitch (alert.tipo) {\r\n\t\t\tcase AlertType.Success:\r\n\t\t\t\treturn 'alert alert-success';\r\n\t\t\tcase AlertType.Error:\r\n\t\t\t\treturn 'alert alert-danger';\r\n\t\t\tcase AlertType.Info:\r\n\t\t\t\treturn 'alert alert-info';\r\n\t\t\tcase AlertType.Warning:\r\n\t\t\t\treturn 'alert alert-warning';\r\n\t\t}\r\n\t}\r\n\r\n\t//[ngClass]=\"{'fa-thumbs-o-up': m.tipo == 1 ,'fa-thumbs-o-down':m.tipo == 2 ,'fa-exclamation-circle':m.tipo == 3 ,'fa-bullseye':m.tipo == 4}\"\r\n\tcssClassIcon(alert: Alert) {\r\n\t\tif (!alert) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tswitch (alert.tipo) {\r\n\t\t\tcase AlertType.Success:\r\n\t\t\t\treturn 'fa-thumbs-o-up';\r\n\t\t\tcase AlertType.Error:\r\n\t\t\t\treturn 'fa-thumbs-o-down';\r\n\t\t\tcase AlertType.Info:\r\n\t\t\t\treturn 'fa-exclamation-circle';\r\n\t\t\tcase AlertType.Warning:\r\n\t\t\t\treturn 'fa-bullseye';\r\n\t\t}\r\n\t}\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CplxAlertComponent } from './cplx-alert.component';\r\nimport { CplxAlertService } from './cplx-alert.service';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ModuleWithProviders } from '@angular/compiler/src/core';\r\nimport { RouterModule } from '@angular/router';\r\n\r\n@NgModule({\r\n\timports: [CommonModule, RouterModule],\r\n\tdeclarations: [CplxAlertComponent],\r\n\texports: [CplxAlertComponent],\r\n\tproviders: [CplxAlertService]\r\n})\r\n\r\nexport class CplxAlertModule {\r\n\tstatic forRoot(): ModuleWithProviders {\r\n\t\treturn {\r\n\t\t\tngModule: CplxAlertModule,\r\n\t\t\tproviders: [CplxAlertService, RouterModule]\r\n\t\t};\r\n\t}\r\n}\r\n"],"names":[],"mappings":"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"}