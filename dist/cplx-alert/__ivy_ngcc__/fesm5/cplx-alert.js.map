{"version":3,"file":"cplx-alert.js","sources":["ng:/cplx-alert/lib/cplx-alert.service.ts","ng:/cplx-alert/lib/cplx-alert.component.ts","ng:/cplx-alert/lib/cplx-alert.module.ts"],"names":[],"mappings":"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","sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { Observable, Subject } from 'rxjs';\r\nimport { Router, NavigationStart } from '@angular/router';\r\n\r\n\r\nexport interface Alert {\r\n\tmensaje?: string;\r\n\ttipo?: AlertType;\r\n\tclass?: string;\r\n\tid?: string\r\n\ttime?: number;\r\n}\r\n\r\nexport enum AlertType {\r\n\tNone,\r\n\tSuccess,\r\n\tError,\r\n\tWarning,\r\n\tInfo\r\n}\r\n\r\n@Injectable({\r\n\tprovidedIn: 'root'\r\n})\r\n\r\nexport class CplxAlertService {\r\n\r\n\tprivate routerchange = false;\r\n\r\n\tconstructor(private router: Router) {\r\n\t\tthis.router.events.subscribe(event => {\r\n\t\t\tif (event instanceof NavigationStart) {\r\n\t\t\t\tif (this.routerchange) {\r\n\t\t\t\t\tthis.routerchange = false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.clear();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tprivate alerta = new Subject<Alert>();\r\n\r\n\tadd(mensaje: Alert) {\r\n\t\tmensaje.class = \"ns-show\"\r\n\t\tmensaje.id = Math.random().toString().split(\".\")[1];\r\n\t\tthis.alerta.next(mensaje);\r\n\t};\r\n\r\n\tgetAlertas(): Observable<Alert> {\r\n\t\treturn this.alerta.asObservable();\r\n\t}\r\n\r\n\tclear() {\r\n\t\tthis.alerta.next();\r\n\t}\r\n}\r\n","import { Component, OnDestroy, Input, OnChanges, SimpleChanges } from '@angular/core';\r\nimport { Alert, CplxAlertService, AlertType } from './cplx-alert.service';\r\nimport { isNullOrUndefined } from 'util';\r\nimport { Subscription } from 'rxjs';\r\n\r\n@Component({\r\n\tselector: 'cplx-alert',\r\n\ttemplateUrl: './cplx-alert.component.html',\r\n\tstyleUrls: ['./cplx-alert.component.css']\r\n})\r\n\r\nexport class CplxAlertComponent implements OnDestroy, OnChanges {\r\n\r\n\tsubscription: Subscription;\r\n\t@Input() alertas = new Array<Alert>();\r\n\t@Input() timeout: number;\r\n\r\n\tconstructor(private _sms: CplxAlertService) {\r\n\t\tthis.subscription = this._sms.getAlertas().subscribe((alert: Alert) => {\r\n\t\t\tif (alert && !isNullOrUndefined(alert.mensaje)) {\r\n\t\t\t\tif (!this.validate_mensaje(alert)) {\r\n\t\t\t\t\tthis.alertas.push(alert);\r\n\t\t\t\t\tlet timeout = isNullOrUndefined(this.timeout) ? 5000 : this.timeout;\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.removerMensaje(alert, alert.id);\r\n\t\t\t\t\t}, timeout)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tngOnChanges(changes: SimpleChanges): void {\r\n\t\tif (this.alertas.length > 0) {\r\n\t\t\tfor (let index = 1; index < this.alertas.length; index++) {\r\n\t\t\t\tlet timeout = (isNullOrUndefined(this.timeout) ? 5000 : this.timeout) + index + 1;\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tthis.removerMensaje(this.alertas[index], this.alertas[index].id);\r\n\t\t\t\t}, timeout)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tngOnDestroy() {\r\n\t\tif (!isNullOrUndefined(this.subscription))\r\n\t\t\tthis.subscription.unsubscribe();\r\n\t}\r\n\r\n\tvalidate_mensaje(mensaje: Alert) {\r\n\t\tif (this.alertas.length)\r\n\t\t\tfor (const alerta of this.alertas)\r\n\t\t\t\tif (alerta.mensaje == mensaje.mensaje) return true;\r\n\t\treturn false;\r\n\t}\r\n\r\n\r\n\tremoverMensaje(alert: Alert, id: string) {\r\n\t\talert.class = 'ns-hide';\r\n\t\tsetTimeout(() => {\r\n\t\t\tlet idx = this.alertas.findIndex(a => a.id == id);\r\n\t\t\tthis.alertas.splice(idx, 1);\r\n\t\t}, 230);\r\n\t}\r\n\r\n\t//[ngClass]=\"{'alert-success text-success': m.tipo == 1 ,'alert-danger text-danger':m.tipo == 2 ,'alert-warning text-warning':m.tipo == 3 ,'alert-primary text-primary':m.tipo == 4}\"\r\n\tcssClass(alert: Alert) {\r\n\t\tif (!alert) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tswitch (alert.tipo) {\r\n\t\t\tcase AlertType.Success:\r\n\t\t\t\treturn 'alert alert-success';\r\n\t\t\tcase AlertType.Error:\r\n\t\t\t\treturn 'alert alert-danger';\r\n\t\t\tcase AlertType.Info:\r\n\t\t\t\treturn 'alert alert-info';\r\n\t\t\tcase AlertType.Warning:\r\n\t\t\t\treturn 'alert alert-warning';\r\n\t\t}\r\n\t}\r\n\r\n\t//[ngClass]=\"{'fa-thumbs-o-up': m.tipo == 1 ,'fa-thumbs-o-down':m.tipo == 2 ,'fa-exclamation-circle':m.tipo == 3 ,'fa-bullseye':m.tipo == 4}\"\r\n\tcssClassIcon(alert: Alert) {\r\n\t\tif (!alert) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tswitch (alert.tipo) {\r\n\t\t\tcase AlertType.Success:\r\n\t\t\t\treturn 'fa-thumbs-o-up';\r\n\t\t\tcase AlertType.Error:\r\n\t\t\t\treturn 'fa-thumbs-o-down';\r\n\t\t\tcase AlertType.Info:\r\n\t\t\t\treturn 'fa-exclamation-circle';\r\n\t\t\tcase AlertType.Warning:\r\n\t\t\t\treturn 'fa-bullseye';\r\n\t\t}\r\n\t}\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CplxAlertComponent } from './cplx-alert.component';\r\nimport { CplxAlertService } from './cplx-alert.service';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ModuleWithProviders } from '@angular/compiler/src/core';\r\nimport { RouterModule } from '@angular/router';\r\n\r\n@NgModule({\r\n\timports: [CommonModule, RouterModule],\r\n\tdeclarations: [CplxAlertComponent],\r\n\texports: [CplxAlertComponent],\r\n\tproviders: [CplxAlertService]\r\n})\r\n\r\nexport class CplxAlertModule {\r\n\tstatic forRoot(): ModuleWithProviders {\r\n\t\treturn {\r\n\t\t\tngModule: CplxAlertModule,\r\n\t\t\tproviders: [CplxAlertService, RouterModule]\r\n\t\t};\r\n\t}\r\n}\r\n"]}